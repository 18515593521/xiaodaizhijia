<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>产品添加/详情</title>
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="Amee" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <link rel="stylesheet" href="../css/bootstrap.min.css" />
    <link rel="stylesheet" href="../css/font-awesome.min.css" />
    <link rel="stylesheet" href="../css/ace.min.css" />
    <link rel="stylesheet" href="../css/ace-rtl.min.css" />
    <link rel="stylesheet" href="../css/admin.css" />
    <!--[if IE 7]>
	<link rel="stylesheet" href="../css/font-awesome-ie7.min.css"/>
	<![endif]-->
    <!--[if lte IE 8]>
	<link rel="stylesheet" href="../css/ace-ie.min.css"/>
	<![endif]-->
    <!--[if lt IE 9]>
	<script src="../js/html5shiv.js"></script>
	<script src="../js/respond.min.js"></script>
	<![endif]-->
    <script src="../js/ace-extra.min.js"></script>
    <style type="text/css">
    
    </style>
</head>

<body class="skin-3 bg-fff scrolling">
    <div class="breadcrumbs " id="breadcrumbs">
        <ul class="breadcrumb">
            <li>
                <i class="icon-home home-icon"></i>
                首页
            </li>
            <li>
                产品管理
            </li>
            <li>
                产品添加/修改
            </li>
        </ul>
        <div class="btn-group pull-right">
            <div class="up_down back" onclick="javascript:history.back(-1);">
                <i class="icon-reply icon-only icon-2x"></i>
            </div>
        </div>
    </div>
    <div class="page-content">
        <div class="row">
        
            <div class="col-sm-12">
                <form action="/supermarket/back/commdity/commodity_saveupdate" onsubmit="return check()" class="form-horizontal" role="form" method="post" enctype="multipart/form-data" >
                	
                	<input type="hidden" id="comid" value="" name="com_id"/>
                    <div class="form-group  col-sm-6  col-lg-4 ">
                        <label class="col-sm-3 control-label no-padding-right"> 公司名称</label>
                        <div class="col-sm-9 am-select">
                            <select class="" id="pass1" name="ci_id">
                                <option value="">=======&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;请选择&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=======</option>     
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group col-sm-6  col-lg-4">
                        <label class="col-sm-3 control-label no-padding-right"> 产品名称 </label>
                        <div class="col-sm-9">
                            <input type="text" placeholder="" class="input-large" name="com_name" id="com_name" />
                        </div>
                    </div>
                    <div class="form-group  col-sm-6  col-lg-4 ">
                        <label class="col-sm-3 control-label no-padding-right"> 产品分类</label>
                        <div class="col-sm-9 am-select">
                            <select class="" id="pass2" name="characteris_dic_id">
                                <option value="">=======&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;请选择&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=======</option>
                                
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group col-sm-6  col-lg-4">
                        <label class="col-sm-3 control-label no-padding-right"> 产品单价 </label>
                        <div class="col-sm-9">
                            <input type="tel" placeholder="" class="input-large" name="com_price" id="com_price" />
                        </div>
                    </div>
                    <div class="form-group  col-sm-6  col-lg-4 ">
                        <label class="col-sm-3 control-label no-padding-right"> 产品标签</label>
                        <div class="col-sm-9 am-select">
                            <select class="" id="pass3" name="lable_dic_id">
                                <option value="">=======&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;请选择&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=======</option>
                               
                            </select>
                        </div>
                    </div>
                    <div class="form-group col-sm-6  col-lg-4">
                        <label class="col-sm-3 control-label no-padding-right"> 放款时间 </label>
                        <div class="col-sm-9">
                            <input type="text" placeholder="" class="input-large" name="fastest_lending_time" id="fastest_lending_time"/>
                        </div>
                    </div>
                    <div class="form-group col-sm-6  col-lg-4">
                        <label class="col-sm-3 control-label no-padding-right"> 产品说明 </label>
                        <div class="col-sm-9">
                            <input type="text" placeholder="" class="input-large" name="com_explain" id="com_explain" />
                        </div>
                    </div>
                    <div class="form-group col-sm-6  col-lg-4">
                        <label class="col-sm-3 control-label no-padding-right"> 放款金额 </label>
                        <div class="col-sm-9">
                            <input type="text" placeholder="" class="input-large" name="com_quota" id="com_quota" />
                        </div>
                    </div>
                    <div class="form-group  col-sm-6  col-lg-4">
                        <label class="col-sm-3 control-label no-padding-right">
                            手机类型</label>
                        <input id="com_star" type="hidden" value="" />
                        <div class="col-sm-9">
                            <div class="mt-3">
                                <label>
                                    <input name="com_star" type="radio" class="ace " value="5" />
                                    <span class="lbl">五星</span>
                                </label>
                                <label>
                                    <input name="com_star" type="radio" class="ace " value="4" checked="checked" />
                                    <span class="lbl">四星</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group col-sm-6  col-lg-4">
                        <label class="col-sm-3 control-label no-padding-right"> 显示申请数 </label>
                        <div class="col-sm-9">
                            <input type="text" placeholder="" class="input-large" name="applications_number" id="applications_number" />
                        </div>
                    </div>
                    <div class="form-group col-sm-6  col-lg-4">
                        <label class="col-sm-3 control-label no-padding-right"> 网址路径 </label>
                        <div class="col-sm-9">
                            <input type="text" placeholder="" class="input-large" name="website_url" id="website_url"/>
                        </div>
                    </div>
                    <div class="form-group col-sm-6  col-lg-4">
                        <label class="col-sm-3 control-label no-padding-right"> 排序 </label>
                        <div class="col-sm-9">
                            <input type="text" placeholder="" class="input-large" name="com_sort" id="com_sort"/>
                        </div>
                    </div>
                    <div class="form-group col-sm-6  col-lg-4">
                        <label class="col-sm-3 control-label no-padding-right"> 日利率 </label>
                        <div class="col-sm-9">
                            <input type="text" placeholder="" class="input-large" name="com_interest" id="com_interest" />
                        </div>
                    </div>
                    <div class="form-group col-sm-6  col-lg-4">
                        <label class="col-sm-3 control-label no-padding-right"> 期限范围 </label>
                        <div class="col-sm-9">
                            <input type="text" placeholder="" class="input-large" name="term_scope" id="term_scope" />
                        </div>
                    </div>
                    <div class="form-group col-sm-6  col-lg-4">
                        <label class="col-sm-3 control-label no-padding-right"> 还款方式 </label>
                        <div class="col-sm-9">
                            <input type="text" placeholder="" class="input-large" name="repayment_method" id="repayment_method" />
                        </div>
                    </div>
                    <div class="form-group col-sm-6  col-lg-4">
                        <label class="col-sm-3 control-label no-padding-right"> 申请条件 </label>
                        <div class="col-sm-9">
                            <input type="text" placeholder="" class="input-large" name="com_condition" id="com_condition" />
                        </div>
                    </div>
                    <div class="form-group col-sm-6  col-lg-4">
                        <label class="col-sm-3 control-label no-padding-right"> 所需材料 </label>
                        <div class="col-sm-9">
                            <input type="text" placeholder="" class="input-large" name="required_materials" id="required_materials"/>
                        </div>
                    </div>
                    <div class="form-group col-sm-6  col-lg-4">
                        <label class="col-sm-3 control-label no-padding-right"> 授权方式 </label>
                        <div class="col-sm-9">
                            <input type="text" placeholder="" class="input-large" name="right_method" id="right_method"/>
                        </div>
                    </div>
                    <div class="form-group col-sm-6  col-lg-4">
                        <label class="col-sm-3 control-label no-padding-right"> 审核认证 </label>
                        <div class="col-sm-9">
                            <input type="text" placeholder="" class="input-large" name="audit_certificatio" id="audit_certificatio" />
                        </div>
                    </div>
                    <div class="form-group col-sm-6  col-lg-4">
                        <label class="col-sm-3 control-label no-padding-right"> 还款说明 </label>
                        <div class="col-sm-9">
                            <input type="text" placeholder="" class="input-large" name="repayment_statemen" id="repayment_statemen" />
                        </div>
                    </div>

                    <div class="form-group col-sm-6  col-lg-4">
                        <label class="col-sm-3 control-label no-padding-right"> 后台路径 </label>
                        <div class="col-sm-9">
                            <input type="text" placeholder="" class="input-large" name="backstage_url" id="backstage_url" />
                        </div>
                    </div>
                    <div class="form-group col-sm-6  col-lg-4">
                        <label class="col-sm-3 control-label no-padding-right"> 后台账号 </label>
                        <div class="col-sm-9">
                            <input type="text" placeholder="" class="input-large" name="backstage_admin" id="backstage_admin" />
                        </div>
                    </div>
                    <div class="form-group col-sm-6  col-lg-4">
                        <label class="col-sm-3 control-label no-padding-right"> 后台密码 </label>
                        <div class="col-sm-9">
                            <input type="text" placeholder="" class="input-large" name="backstage_password" id="backstage_password" />
                        </div>
                    </div>
                    <div class="form-group col-sm-6  col-lg-4">
                        <label class="col-sm-3 control-label no-padding-right">结算方式</label>
                        <div class="col-sm-9 am-select">
                            <select class="" id="pass4" name="settlement">
                                <option value="">=======&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;请选择&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=======</option>
                                <option value="0">预付</option>
                                <option value="1">日结</option>      
                            </select>
                        </div>
                    </div>

                    <div class="form-group col-sm-6  col-lg-4">
                        <label class="col-sm-3 control-label no-padding-right"> logo </label>
                        <div class="col-sm-9">
                            <input type="file" id="file" name="file">
                        </div>
                    </div>
                    <div class="form-group col-sm-6  col-lg-4">
                        <label class="col-sm-3 control-label no-padding-right"> logo </label>
                        <div class="col-sm-9">
                            <img src="" id="lg" alt="" width="70">
                        </div>
                    </div>
                    <div class="form-group  col-sm-12 center">
                        <button type="submit" class="btn btn-xs btn-success" >
                            确定
                        </button>
                        <button type="reset" class="btn btn-xs btn-danger">
                            重置
                        </button>
                    </div>
                  
                </form>
            </div>

        </div>
        <a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
            <i class="icon-double-angle-up icon-only bigger-110"></i>
        </a>
    </div>
    
    <script src="../js/jquery-2.0.3.min.js"></script>
    <script src="../js/laydate/laydate.js"></script>
    
    <script src="../js/jquery.dataTables.min.js"></script>
    <script src="../js/jquery.dataTables.bootstrap.js"></script>
    <script type="text/javascript">
	    $(function () {  
	    	$.ajax({
                url:"/supermarket/back/commdity/find_company",
                type:"POST",
                dataType:"json",
                async:false,
                success:function(data){
                	var company = data.listcompany; 
                	console.log(company);
                	var option="";
                	$("#pass1 option:gt(0)").remove(); 
                	for (var i = 0; i < company.length; i++) { 
                		option +='<option value='+company[i].ci_id+'>';
                		option +=company[i].ci_name;
                		option +="</option>";
					}
                	$("#pass1").append(option);  
                	
                	var diction = data.dictionList;
                	console.log(diction);
                	var opn="";
                	$("#pass2 option:gt(0)").remove(); 
                	$.each(diction,function(index,item){
                		console.log(">>>"+item.dic_key);
                		if(item.dic_key==""||item.dic_key==null){
                			return ;
                		}
                		opn +='<option value='+item.dic_id+'>';
                		opn +=item.dic_value;
                		opn +="</option>";
                	})
                	
                	$("#pass2").append(opn);  
                	
                	var diction = data.comclassifyList;
                	console.log(diction);
                	var opn="";
                	$("#pass3 option:gt(0)").remove(); 
                	$.each(diction,function(index,item){
                		console.log(">>>"+item.dic_key);
                		if(item.dic_key==""||item.dic_key==null){
                			return ;
                		}
                		opn +='<option value='+item.dic_id+'>';
                		opn +=item.dic_value;
                		opn +="</option>";
                	})
                	
                	$("#pass3").append(opn);  
               }
	    
    		}) 

    		function show(){
	    		
	    	}
	    	var com_id = getQueryString("com_id");   
	    	$("#comid").val(com_id);
	    	 if(com_id!="share"){
	    		$.ajax({
	                url:"/supermarket/back/commdity/find_ByIdCommodity",
	                type:"POST",
	                dataType:"json",
	                data:{com_id:com_id},
	                success:function(data){
	                	var com = data.listcom; 
	                	for (var i = 0; i < com.length; i++) {
							$("#com_name").val(com[i].com_name);
							/* 单价以分存储 展示除100 */
							$("#com_price").val((com[i].com_price/100).toFixed(2));
							$("#fastest_lending_time").val(com[i].fastest_lending_time);
							$("#com_explain").val(com[i].com_explain);
							$("#com_quota").val(com[i].com_quota);
							$("#applications_number").val(com[i].applications_number);
							$("#website_url").val(com[i].website_url);
							$("#com_sort").val(com[i].com_sort);
							$("#com_interest").val(com[i].com_interest);
							$("#term_scope").val(com[i].term_scope);
							$("#repayment_method").val(com[i].repayment_method);
							$("#com_condition").val(com[i].com_condition);
							$("#required_materials").val(com[i].required_materials);
							$("#audit_certificatio").val(com[i].audit_certificatio);
							$("#repayment_statemen").val(com[i].repayment_statemen);
							$("#backstage_url").val(com[i].backstage_url);
							$("#backstage_admin").val(com[i].backstage_admin);
							$("#backstage_password").val(com[i].backstage_password);
							$("#right_method").val(com[i].right_method);
							document.getElementById('lg').src = com[i].com_logo;
							$("#pass1").find("option[value='"+com[i].ci_id+"']").attr("selected",true);	
							$("#pass2").find("option[value='"+com[i].characteris_dic_id+"']").attr("selected",true);
							$("#pass3").find("option[value='"+com[i].lable_dic_id+"']").attr("selected",true);
							$("#pass4").find("option[value='"+com[i].settlement+"']").attr("selected",true);
							$("input[name=com_star][value=" + com[i].com_star + "]").attr("checked", true);
						}
	                }
		       }) 
	    	} 
	    		
	    })
	    
		    function getQueryString(key) {
				var reg = new RegExp("(^|&)" + key + "=([^&]*)(&|$)");
				var r = window.location.search.substr(1).match(reg);
				if (r != null)
					return unescape(r[2]);
				return "share";
			}
	    
	   　function check(){
		   debugger;
		  var pass1 = 　$("#pass1").val();	 
		  var pass2 = 　$("#pass2").val();	 
		  var pass3= 　$("#pass3").val();	 
		  var pass4= 　$("#pass4").val();	 
		  var com_name = $("#com_name").val();	 
		  var fastest_lending_time = $("#fastest_lending_time").val();
		  var com_explain = $("#com_explain").val();
		  var com_quota = $("#com_quota").val();
		  var website_url = $("#website_url").val();
		  var term_scope = $("#term_scope").val();
		  var repayment_method = $("#repayment_method").val();
		  var com_condition = $("#com_condition").val();
		  var required_materials = $("#required_materials").val();
		  var audit_certificatio = $("#audit_certificatio").val();
		  var repayment_statemen = $("#repayment_statemen").val();
		  var backstage_url = $("#backstage_url").val();
		  var backstage_admin = $("#backstage_admin").val();
		  var backstage_password = $("#backstage_password").val();
		  var right_method = $("#right_method").val();
		   
		   
		 　 var com_price = $("#com_price").val();　　
		  var applications_number = $("#applications_number").val();　　
		  var com_sort = $("#com_sort").val();
		  var com_interest = $("#com_interest").val();
		 　 var re = /^[0-9]+.?[0-9]*/;//判断字符串是否为数字//判断正整数/[1−9]+[0−9]∗]∗/ 
	　	  　if (!re.test(com_price)) { 
	　　　　	  alert("商品单价输入格式不正确 ,请输入数字"); 
			  return false;
		　 } 
		  if (!re.test(applications_number)) { 
		　　　　alert("申请数量输入格式不正确 ,请输入数字"); 
		      return false;
		　　}
		  if (!re.test(com_sort)) { 
		　　　   　alert("排序输入格式不正确 ,请输入数字"); 
		      return false;
		　　}
		 
		   if (!re.test(com_interest)) { 
		　　　　alert("日利率输入格式不正确 ,请输入数字"); 
		     return false;
	　         　   }
		   
		   if (pass1 =="" || pass2=="" || pass3=="" ||com_name=="" || fastest_lending_time=="" || com_explain=="" || com_quota=="" || website_url=="" || term_scope=="" || repayment_method=="" || com_condition=="") { 
			　　　　alert("请填写完整信息！"); 
			     return false;
		　     }
		   
		   if (audit_certificatio=="" || repayment_statemen=="" || backstage_url=="" || required_materials=="" || right_method=="") { 
			　　　　alert("请填写完整信息!"); 
			     return false;
		　     }
		   
		   if(pass4 ==""){
			   alert("请选择结算方式！");
			   return false;
		   }
		
	 　
		 　　　　return true;
	
		 　}
	       
	   
	    
    
    </script>
</body>

</html>